include includes/header
include includes/nav
.container(ng-controller='dashController')
	.row
		.col-xs-12
			.alert.alert-dismissible.fade.in(ng-class='alertStyle',role="alert")
				button.close(type="button",data-dismiss="alert",aria-label="Close")
					span(aria-hidden='true') &times;
				p {{alertMessage}}
	.row
		.col-sm-6
			.well(ng-if='eventSources && eventSources.length && eventSources[0].events.length')
				h1 
					i.fa.fa-cog.fa-spin.fa-fw
					| &nbsp;In progress
				ul.list-group
					li.list-group-item(ng-repeat='e in eventSources[0].events')
						.row
							.col-lg-8
								h4.list-group-item-heading(style='margin-top:5px')
									span(style='margin-right:10px') {{e.title}}
									small
										i.fa.fa-clock-o.fa-fw
										| &nbsp;{{e.duration}}
							.col-lg-4
								button.btn.btn-block(type='button',ng-click='stopEvent(e.id)')
									i.fa.fa-times.fa-fw
				hr
				button.btn(type='button',ng-click='stopAllEvents()') Stop all
			.well
				h1
					i.fa.fa-check-square-o.fa-fw
					| Start new event
				hr
				form
					.row
						.col-xs-12
							.form-group
								label.sr-only Event name
								.input-group
									span.input-group-btn
										button.btn.btn-default
											i.fa.fa-search.fa-fw
									input.form-control(type='text',placeholder='Event name',ng-model='eventName',ng-required,uib-typeahead='event.name for event in getEvents($viewValue)',typeahead-loading='loadingEvents',typeahead-no-results='noEvents',typeahead-on-select='onTypeAheadSelect($item, $model, $label)')
								.alert.alert-warning(ng-show='loadingEvents || noEvents')
									span(ng-show='loadingEvents')
										i.fa.fa-refresh
										| &nbsp;Loading ...
									span(ng-show='noEvents')
										i.fa.fa-remove
										| &nbsp;No events found!
							.form-group
								label.sr-only Start time
								.input-group
									span.input-group-btn
										button.btn.btn-default
											i.fa.fa-clock-o.fa-fw
									input.form-control(type='text', placeholder='Event start time',ng-model='startDateFormat',disabled)
					.row
						.col-xs-6
							.form-group
								label.sr-only Text color
								input.form-control.minicolors#textcolor(type='hidden',ng-model='textcolor',data-control='saturation',placeholder='Font color',value='{{textcolor}}')
						.col-xs-6
							.form-group
								label.sr-only Background color
								input.form-control.minicolors#bgcolor(type='hidden',ng-model='bgcolor',data-control='saturation',placeholder='Background color',value='{{bgcolor}}')
					.row
						.col-xs-12
							.text-right
								button.btn.btn-default(type='button',ng-click='changeEvent()',style='margin-right:5px') Change
								button.btn.btn-primary(type='button',ng-click='submitEventItem()') Start
		.col-sm-6
			.calendar(ui-calendar='uiConfig.calendar',ng-model='eventSources')
	.row
		.col-xs-12
			hr
	.row
		.col-sm-6
			h1 
				i.fa.fa-history.fa-fw
				| &nbsp;Completed events
			ul.list-group(ng-show='eventSources && eventSources[1]')
				li.list-group-item(ng-repeat='e in eventSources[1]',style='background-color:{{e.color}};padding:0 15px')
					.row
						.col-lg-1
							button.close.pull-left(type='button',style='margin:25px 0')
								span &times;
						.col-lg-11(ng-click='setNewEvent(e)')
							span.badge.pull-right(style='margin:25px 0') {{e.duration}}
							h4(style='color:{{e.textColor}};margin:25px 0') {{e.title}}
			.well(ng-hide='eventSources && eventSources[1].length')
				h1
					i.fa.fa-warning.fa-fw
					| &nbsp;No previous events
		.col-sm-6
			h1 
				i.fa.fa-bar-chart.fa-fw
				| &nbsp;Statistics
			ul.list-group(ng-show='eventGroups')
				li.list-group-item(ng-repeat='e in eventGroups',style='background-color:{{e.event.fontBgColor}};padding:0 15px')
					.row
						.col-lg-12(ng-click='setNewEvent(e.event)')
							span.badge.pull-right(style='margin:25px 0') {{e.duration}}
							h4(style='color:{{e.event.fontTextColor}};margin:25px 0') {{e.event.name}}
			.well(ng-hide='eventGroups.length')
				h1
					i.fa.fa-warning.fa-fw
					| &nbsp;No previous events
include includes/js